<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>AHTOXA.NET:Про электронику:Другие проекты:Матричный светодиодный индикатор на MAX7219</title>
<link rel="stylesheet" type="text/css" href="/img/ahtoxa.css">
<script type="text/javascript" language="JavaScript" src="/img/tree.js"></script>
<script type="text/javascript" language="JavaScript" src="/img/mmenu.js"></script>
</head>
<body>
<script type="text/javascript" language="JavaScript">
<!--
SiteHead();
-->
</script>

<p class="image"><a href="7-seg-clock.jpg"><img align="right" src="7-seg-clock-small.jpg"></a>

<h1>Матричный светодиодный индикатор на MAX7219</h1>
<p>В этой статье описан индикатор на трёх светодиодных матрицах 8x8.
В качестве драйвера светодиодных матриц использованы микросхемы MAX7219.
<hr>

<h2>Описание</h2>

<p>Довольно давно я наткнулся на радиокоте на статью
<a href="http://radiokot.ru/circuit/digital/home/103/" target=_blank>Простые часы на светодиодных матрицах</a>.
Статья понравилась, часы у автора получились очень симпатичные. Появилась мысль сделать что-нибудь подобное.
<p>Но мне не хотелось повторять конструкцию один-в-один. Наверняка часть функций мне не понадобится,
или я захочу что-то добавить.
<!--Потом, пока индикаторы ехали ко мне из далёкой страны Китай, у меня появились какие-то другие дела, и дело на некоторое время застопорилось. -->
<p>В общем, я решил сделать для начала отдельный модуль индикатора. В качестве драйверов светодиодных матриц
выбрал микросхему <a href="http://www.maximintegrated.com/datasheet/index.mvp/id/1339" target=_blank>MAX7219</a>.
Мне нравится эта микросхема - может контролировать 8 семисегментников с общим катодом или матрицу светодиодов 8x8, 
управляется по трём проводам, может регулировать яркость. Максимальный ток через светодиоды задаётся одним резистором.
Применение такого драйвера освобождает контроллер от необходимости постоянно обновлять изображение на светодиодной матрице.
<p>Матричные индикаторы 8x8 (красные, 5мм) заказал на ebay. Там же заказал и MAX7219.

<h2>Схема</h2>

<p>Схема состоит из трёх одинаковых блоков. Каждый блок содержит матричный индикатор 8x8 и драйвер MAX7219.
Вот схема блока:
<p class="image"><a href="led-module-big.gif"><img src="led-module.gif"></a>
<p>Разряды я подключил не по порядку, чтобы облегчить разводку платы. Это позволило мне развести плату в одном слое,
буквально с парой перемычек. Придётся потом при написании программы
это учесть, и соответственно перемешивать битики при отправке данных.
Ну да ничего, это всё равно проще, чем делать двухслойную плату:)

<p>Блоки соединены в цепочку:
<p class="image"><a href="led-matrix-24x8-big.gif"><img src="led-matrix-24x8.gif"></a>

<p>Или вот эта же (<a href="cpu-board.pdf">схема в pdf</a>)

<h2>Описание работы</h2>

<p>Две кнопки. Одна увеличивает время, другая - уменьшает. На данный момент это всё:)
<p>Надо бы сделать ещё регулировку яркости и корректировку хода. Но что-то всё некогда.

<h2>Конструкция</h2>

<p>Часы состоят из двух плат: платы индикаторов и процессорной платы.

<p>Плата индикаторов содержит четыре семисегментных индикатора и два светодиода, 
изображающие точки. Всё это динамически управляется сдвиговыми регистрами 
<a href="http://www.nxp.com/documents/data_sheet/74HC_HCT595.pdf">74HC595</a>.
<p class="image"><a href="10-indicator-board.jpg"><img src="10-indicator-board-small.jpg"></a>

<p>Процессорная плата содержит микроконтроллер 
<a href="http://www.st.com/web/en/resource/technical/document/datasheet/CD00251732.pdf">STM32F100C8</a> 
(64К flash, 8К ОЗУ в корпусе LQFP48) с небольшой обвязкой (питание, кварц, ионистор).
<p class="image"><a href="20-cpu-board.jpg"><img src="20-cpu-board-small.jpg"></a>

<p>Платы смонтированы одна над другой. Корпус склеен из полистирола,
в качестве клея использовался дихлорэтан.
<p class="image"><a href="25-in-a-box.jpg"><img src="25-in-a-box-small.jpg"></a>

<p>Передняя стенка - из тонированного оргстекла. Тонировка фиолетовая, 
в сочетании с индикаторами красного цвета смотрится очень хорошо.
<p>Две кнопки собраны на куске макетной платы и привинчены на верхнюю стенку корпуса.
Разъём питания приклеен на боковую стенку.
<p>После сборки и проверки конструкция была ошкурена и покрыта аэрозольной краской для бамперов. 
Она даёт приятную матовую поверхность. Результат мне очень нравится. 
Питается устройство от какой-то зарядки от сотового, которая выдаёт напряжение 5В.

<h2>Прошивка</h2>

<p>Прошивку пока не выкладываю, допишу как следует - выложу:-)

<p>&copy; AHTOXA, 2014.


<script type="text/javascript" language="JavaScript">
<!--
SiteFoot()
-->
</script>
</body>
</html>
